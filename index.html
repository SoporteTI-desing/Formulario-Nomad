<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Ingreso de Venta - Nomad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f6fb;
      margin: 0;
      padding: 24px 12px;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
      background: #ffffff;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.12);
      border: 1px solid #d0d7e2;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid #e5e7eb;
    }
    .title { font-size: 22px; font-weight: 700; }
    .subtitle { font-size: 13px; color: #6b7280; }
    .logo { height: 56px; }
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .08em;
      background: linear-gradient(135deg,#00a8e8,#0052a5);
      color: #fff;
      margin-bottom: 4px;
    }
    .section-title {
      margin-top: 20px;
      margin-bottom: 8px;
      font-size: 15px;
      font-weight: 600;
      border-left: 4px solid #0052a5;
      padding-left: 8px;
    }
    .field-group { margin-bottom: 12px; }
    label { display:block; font-size: 13px; margin-bottom: 4px; }
    .biomarcador-list {
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:4px;
    }
    .biomarcador-list label {
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid #d0d7e2;
      background:#f9fafb;
      font-size:12px;
      margin-bottom:4px;
    }
    .biomarcador-list input[type=checkbox] {
      margin:0;
    }
n:0;
    }
    .required { color:#e11d48; }
    input[type=text],input[type=email],input[type=tel],input[type=date],select,textarea {
      width: 100%;
      box-sizing:border-box;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #d0d7e2;
      font-size: 13px;
    }
    input:focus,select:focus,textarea:focus {
      outline:none;
      border-color:#0052a5;
      box-shadow:0 0 0 2px rgba(0,82,165,.18);
    }
    textarea { min-height:70px; resize:vertical; }
    .row { display:flex; flex-wrap:wrap; gap:12px; }
    .col-2 { flex:1 1 220px; }
    .files-input {
      border:1px dashed #d0d7e2;
      padding:10px;
      border-radius:10px;
      background:#f9fafb;
    }
    .btn-primary {
      margin-top:16px;
      padding:10px 22px;
      border-radius:999px;
      border:none;
      background:linear-gradient(135deg,#0052a5,#00a8e8);
      color:#fff;
      font-weight:600;
      cursor:pointer;
    }
    .result-box {
      margin-top:18px;
      padding:10px;
      border-radius:10px;
      background:#e0edff;
      font-size:11px;
      max-height:220px;
      overflow:auto;
      white-space:pre-wrap;
    }
    .success-message {
      margin-top:14px;
      padding:10px 12px;
      border-radius:10px;
      background:#ecfdf3;
      border:1px solid #16a34a;
      font-size:13px;
    }
    .success-actions {
      margin-top:8px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .success-link {
      font-size:12px;
      padding:6px 12px;
      border-radius:999px;
      border:1px solid #0052a5;
      text-decoration:none;
      color:#0052a5;
      background:#f0f5ff;
    }
    .success-link:hover {
      background:#0052a5;
      color:#ffffff;
    }
    .hidden { display:none; }
    .floating-panel-btn {
      position:fixed;
      right:16px;
      bottom:16px;
      padding:9px 16px;
      border-radius:999px;
      border:none;
      background:linear-gradient(135deg,#0052a5,#00a8e8);
      color:#fff;
      font-size:12px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      text-decoration:none;
      box-shadow:0 10px 24px rgba(15,23,42,.35);
    }
    @media(max-width:640px){
      .header{flex-direction:column;align-items:flex-start;}
      .container{padding:18px 14px;}
    }
  </style>
</head>
<body>
  <a href="base.html" class="floating-panel-btn" title="Ver panel de registros"> Base de registros</a>
  <div class="container">
    <header class="header">
      <div>
        <div class="badge">Nomad 路 Ingreso de venta</div>
        <div class="title">Formulario de Ingreso de Venta</div>
        <div class="subtitle">Captura de datos para estudios gen贸micos y oncol贸gicos.</div>
      </div>
      <img src="logo-nomad.png" class="logo" alt="Nomad Genetics">
    </header>

    <form id="ingresoVentaForm" onsubmit="handleSubmit(event)">
      <div class="section-title">Datos de contacto</div>
      <div class="field-group">
        <label for="correo">Correo electr贸nico <span class="required">*</span></label>
        <input type="email" id="correo" name="correo" required>
      </div>
      <div class="field-group">
        <label for="kam">KAM <span class="required">*</span></label>
        <select id="kam" name="kam" required>
          <option value="">Selecciona una opci贸n</option>
          <option>Andrea</option>
          <option>Angel</option>
          <option>Francisco</option>
          <option>Marymar</option>
          <option>Inplant</option>
          <option>Sohin</option>
          <option>Tijuana</option>
          <option>Nereida</option>
          <option>Claudia</option>
        </select>
      </div>
      <div class="field-group">
        <label for="institucion">Nombre completo de la Instituci贸n / Hospital <span class="required">*</span></label>
        <input type="text" id="institucion" name="institucion" required>
      </div>

      <div class="section-title">Datos del m茅dico</div>
      <div class="row">
        <div class="field-group col-2">
          <label for="ciudad">Ciudad <span class="required">*</span></label>
          <input type="text" id="ciudad" name="ciudad" required>
        </div>
        <div class="field-group col-2">
          <label for="medicoSelect">Nombre completo del M茅dico <span class="required">*</span></label>
          <input type="text" id="medicoSearch" placeholder="Buscar m茅dico..." oninput="filterMedicos()" />
          <select id="medicoSelect" required onchange="handleMedicoSelectChange()">
            <option value="">Selecciona una opci贸n</option>
          <option>AARON GONZALEZ ENCISO</option>
          <option>ABEL BERNECHEA MIRANDA</option>
          <option>ABIGAIL SAMOAYA MATEOS SORIA</option>
          <option>ADRIAN CRAVIOTO VILLANUEVA</option>
          <option>ADRIAN GOMEZ GOMEZ</option>
          <option>ALAN BURGUETE TORRES</option>
          <option>ALAN LEDIF REYES MONDRAGON</option>
          <option>ALBERTO ALVARADO MIRANDA</option>
          <option>ALBERTO GONZALEZ AGUILAR</option>
          <option>ALBERTO MITSUO LEON TAKAHASHI</option>
          <option>ALBERTO MONROY CHARGOY</option>
          <option>ALBERTO OLAYA VARGAS</option>
          <option>ALBERTO VIELMA VALDEZ</option>
          <option>ALBERTO VILLALOBOS PRIETO</option>
          <option>ALEJANDRA ARMENGOL ALONSO</option>
          <option>ALEJANDRA JIMENA GARCIA VELAZQUEZ</option>
          <option>ALEJANDRO CASTILLO GALEAZZI</option>
          <option>ALEJANDRO CASTILLO GALEAZZI</option>
          <option>ALEJANDRO DE LEON CRUZ</option>
          <option>ALEJANDRO LOPEZ CUETO ESPINOZA</option>
          <option>ALEJANDRO MARTINEZ RUEDA</option>
          <option>ALEJANDRO NOGUEZ RAMOS</option>
          <option>ALETHIA ALVAREZ CANO</option>
          <option>ALFONSO CERVERA UBIERNA</option>
          <option>ALFONSO TORRES LOBATON</option>
          <option>ALFONSO TORRES ROJO</option>
          <option>ALFREDO AVILA</option>
          <option>ALICIA GUTIERREZ MATA</option>
          <option>ALLAN LEGASPI SAUTER</option>
          <option>ALMA AZUCENA SEGURA CHAMA</option>
          <option>ALMA GEORGINA PALACIOS MARTINEZ</option>
          <option>ALMA LILIA ORTIZ MALDONADO</option>
          <option>ALMA MAGDALENA ASTORGA RAMOS</option>
          <option>ALMA ROSA LOPEZ MARISCAL</option>
          <option>ALVARO AGUAYO GONZALEZ</option>
          <option>ALVARO BARBOSA-QUINTANA</option>
          <option>AMANCIO GATICA PEREZ</option>
          <option>ANA CRISTINA ARTEAGA GOMEZ</option>
          <option>ANA ELENA MARTIN AGUILAR</option>
          <option>ANA GRACIELA PUEBLA MORA</option>
          <option>ANA MARIA ZEMPOALTECA LOPEZ</option>
          <option>ANA OLIVIA CORTES FLORES</option>
          <option>ANA OLIVIA CORTES FLORES</option>
          <option>ANA PAULINA MELENDEZ FERNANDEZ</option>
          <option>ANAIT ABAD SOLARES</option>
          <option>ANGEL AZAEL LOPEZ GALINDO</option>
          <option>ANGELICA CONCEPCION  CRUZ CADENA</option>
          <option>ANTONIO ALFEIRAN RUIZ</option>
          <option>ANTONIO GOMEZ PEDRAZA</option>
          <option>ANTONIO MAFFUZ AZIZ</option>
          <option>ANTONIO ROLON PADILLA</option>
          <option>ANTONIO VELAZQUEZ GONZALEZ</option>
          <option>ANTONIO GUILLERMO ZALDIVAR NEAL</option>
          <option>ARACELI RIVERA SANTIAGO</option>
          <option>ARIADNA ESTELA  GONZALEZ DEL ANGEL</option>
          <option>ARMANDO BERNANDO MARTINEZ AVALOS</option>
          <option>ARMANDO RAMIREZ</option>
          <option>ARMEN STANKOV DRAGAN</option>
          <option>ARTURO PABEL MIRANDA AGUIRRE</option>
          <option>ATZIRI AIDEE MADERO CASTRO</option>
          <option>AURORA MEDINA SANSON</option>
          <option>AZCARY VAZQUEZ TINAJERO</option>
          <option>BENIGNO EMMANUEL RODRIGUEZ SOTO</option>
          <option>BENITO SANCHEZ LLAMAS</option>
          <option>BENITO SANCHEZ LLAMAS</option>
          <option>BETSABE HERNANDEZ HERNANDEZ</option>
          <option>BRENDA LETICIA GONZALEZ GARCIA</option>
          <option>BRIZIO MORENO JAIME</option>
          <option>CARLO EGYSTO CICERO ONETO</option>
          <option>CARLOLS DANIEL ROBLES VIDAL</option>
          <option>CARLOS ALBERTO LARA GUTIERREZ</option>
          <option>CARLOS ALBERTO RAMIREZ ALVARADO</option>
          <option>CARLOS ALBERTO RONQUILLO CARREON</option>
          <option>CARLOS ALBERTO RONQUILLO CARREON</option>
          <option>CARLOS ALBERTO SERVIN HERNANDEZ</option>
          <option>CARLOS ARANDA FLORES</option>
          <option>CARLOS ARTURO GONZALEZ NUEZ</option>
          <option>CARLOS AUGUSTO GUTIERREZ FLORES</option>
          <option>CARLOS DANIEL LEVER ROSAS</option>
          <option>CARLOS EDUARDO QUINTERO RODRIGUEZ</option>
          <option>CARLOS EDUARDO SALAZAR MEJIA</option>
          <option>CARLOS MANUEL ORTIZ MENDOZA</option>
          <option>CARLOS RAMIREZ ALVARADO</option>
          <option>CARLOS ROBERTO LUGO ESCALANTE</option>
          <option>CARLOS ZULOAGA FERNANDEZ DEL VALLE</option>
          <option>CARLOS DANIEL ROBLES VIDAL</option>  
          <option>CARMEN AGUILAR JIMENEZ</option>
          <option>CESAR GONZALEZ DE LEON</option>
          <option>CESAR SALDIVAR MORENO</option>
          <option>CHRISTIAN HAYDEE FLORES BALCAZAR</option>
          <option>CHRISTIAN PATRICIO CAMACHO LIMAS</option>
          <option>CINDY AIDEE NAJERA MUOZ</option>
          <option>CITLALI LOPEZ ARCIGA</option>
          <option>CLAUDIA LORENA URZUA FLORES</option>
          <option>CLAUDIO RENE MONTESDEOCA ORELLANA</option>
          <option>CONNIE ZURATZI DENEKEN HERNANDEZ</option>
          <option>CONSUELO IRENE GUTIERREZ COLIN</option>
          <option>CRISTINA ALVARADO SILVA</option>
          <option>CRISTOBAL DIAZ GOMEZ</option>
          <option>CYNTHIA VILLARREAL</option>
          <option>DAGOBERTO MOLINA POLO LOPEZ DE CARDENAS</option>
          <option>DAN GREEN REENER</option>
          <option>DANIEL ABELARDO LOPEZ VALLEJO</option>
          <option>DANIEL ALEJANDRO GARCIA PADILLA</option>
          <option>DANIEL ALEJANDRO GARCIA PADILLA</option>
          <option>DANIEL CAPDEVILLE GARCIA</option>
          <option>DANIEL CAPDEVILLE GARCIA</option>
          <option>DANIEL MOTOLA KUBA</option>
          <option>DANIEL PEREZ CERVANTES</option>
          <option>DANIEL VALENCIA MERCADO</option>
          <option>DANIELA HERNANDEZ LARA</option>
          <option>DANIELA SHVEID GERSON</option>
          <option>DANIELA VAZQUEZ JUAREZ</option>
          <option>DANIELLA GOMEZ PUE</option>
          <option>DANTE CARBAJAL OCAMPO</option>
          <option>DAVID ACOSTA GUTIERREZ</option>
          <option>DAVID FUENTES MEDINA</option> 
          <option>DAVID CAZARES SANCHEZ</option>
          <option>DAVID CAZAREZ SANCHEZ</option>
          <option>DAVID CUEVAS QUEZADA</option>
          <option>DAVID DAVILA DUPONT</option>
          <option>DAVID EDUARDO MUOZ GONZALEZ</option>
          <option>DAVID FRANCISCO CANTU DE LEON</option>
          <option>DAVID JOSE HEREDIA VAZQUEZ</option>
          <option>DAVID ORTA CORTES</option>
          <option>DAVID PONCE HERRERA</option>
          <option>DAVID SUAREZ GARCIA</option>
          <option>DEBORAH MARIA MARTINEZ BAOS</option>
          <option>DENISE ACUA GONZALEZ</option>
          <option>DENYS ELIZABETH DELGADO AMADOR</option>
          <option>DIANA ALEJANDRA VILLEGAS OSORNO</option>
          <option>DIANA FABIOLA FLORES</option>
          <option>DIANA PATRICIA JIMENEZ CARRANZA</option>
          <option>DIEGO A. DIAZ GARCIA</option>
          <option>DIEGO ALFONSO BALLESTEROS PINO</option>
          <option>DIEGO ARMANDO DIAZ GARCIA</option>
          <option>DIEGO JORGE</option>
          <option>DIEGO OSORIO PEREZ</option>
          <option>DINO ALBERTO MURILLO CRUZ</option>
          <option>DIONE AGUILAR Y MENDEZ</option>
          <option>DOLORES GALLARDO</option>
          <option>EDER A ARANGO BRAVO</option>
          <option>EDER ARAIZA ALVARADO</option>
          <option>EDGAR NERI PAEZ</option>
          <option>EDGAR RODRIGUEZ ANTEZANA</option>
          <option>EDGAR VARELA SANTOYO</option>
          <option>EDIO LLERENA HERNANDEZ</option>
          <option>EDITH GARCIA LUNA</option>
          <option>EDNA ROJAS CURIEL</option>
          <option>EDUARDO ALBERTO GUZMAN HUERTA</option>
          <option>EDUARDO ANTONIO MAAFS MOLINA</option>
          <option>EDUARDO BARRAGAN CURIEL</option>
          <option>EDUARDO EDMUNDO REYNOSO GOMEZ</option>
          <option>EDUARDO EMIR CERVERA CEBALLOS</option>
          <option>EDUARDO JORGE BAOS RODRIGUEZ</option>
          <option>EDUARDO TELLEZ BERNAL</option>
          <option>EDWARD MORGAN OCHOA</option>
          <option>EFRAIN SALAS GONZALEZ</option>
          <option>ELEAZAR OMAR MACEDO LOPEZ</option>
          <option>ELIA IXEL APODACA CHAVEZ</option>
          <option>ELIA NALLELY BARRIENTOS LUNA</option>
          <option>ELIAS RESCALA BACA</option>
          <option>ELISEO EMMANUEL JUAREZ ZUIGA</option>
          <option>ELISEO NEFTALI DE LA CRUZ ESCOBAR</option>
          <option>ELIZABETH ESCOBAR ARRIAGA</option>
          <option>ELIZABETH SANCHEZ VALLE</option>
          <option>ELVIRA GOMEZ GOMEZ</option>
          <option>EMILIO CONDE</option>
          <option>EMILIO GAMEZ UGALDE</option>
          <option>EMILIO MURILLO RAMIREZ</option>
          <option>EMMANUEL DE LA MORA JIMENEZ</option>
          <option>ENRIQUE AVILA MONTEVERDE</option>
          <option>ENRIQUE GOMEZ MORALES</option>
          <option>ENRIQUE JOSE ZAMUDIO LOZOYA</option>
          <option>ERIC ORTIZ</option>
          <option>ERICK SALADO RAMIREZ</option>
          <option>ERIKA BETZABE RUIZ GARCIA</option>
          <option>ERIKA SUSANA BARBOSA AVALOS</option>
          <option>ERNESTO JOSE ZEPEDA CASTILLA</option>
          <option>ERNESTO MORENO SALAS</option>
          <option>ERNESTO R. SANCHEZ FORGACH</option>
          <option>ESMERALDA ROMERO BAUELOS</option>
          <option>ETZALLI PAMELA LINARES CHAVEZ</option>
          <option>EUCARIO LEON RODRIGUEZ</option>
          <option>EVA RUVALCABA LIMON</option>
          <option>FEDERICO MALDONADO MAGOS</option>
          <option>FELIPE DE JESUS ANCHONDO ORTEGA</option>
          <option>FELIPE VILLEGAS CARLOS</option>
          <option>FERNANDO ALDACO SARVIDE</option>
          <option>FERNANDO CANDANEDO GONZALEZ</option>
          <option>FERNANDO CERECEDO DIAZ</option>
          <option>FERNANDO CORDERA GONZALEZ DE COSIO</option>
          <option>FERNANDO ENRIQUE MAINEROL RATCHEOLUS</option>
          <option>FERNANDO JAVIER VILLALOBOS PEA</option>
          <option>FERNANDO PEREZ ZINCER</option>
          <option>FERNANDO SALDIVAR GALINDO</option>
          <option>FERNANDO ULISES LARA GONZALEZ</option>
          <option>FERNANDO ULISES LARA MEDINA</option>
          <option>FIDEL DAVID HUITZIL MELENDEZ</option>
          <option>FLAVIA MORALES VASQUEZ</option>
          <option>FLOR DE THE BUSTAMANTE VALLES</option>
          <option>FLOR MARIA ARMILLAS CANSECO</option>
          <option>FRANCISCO JAVIER GOMEZ-PEDROSO REA</option>
          <option>FRANCISCO JAVIER OCHOA CARRILLO</option>
          <option>FRANCISCO JAVIER ALVARADO VILLAREAL</option>
          <option>FRANCISCO LOPEZ SACHINAS</option>
          <option>FRANCO KRAKAUR GARCIA</option>
          <option>FROYLAN LOPEZ LOPEZ</option>
          <option>FROYLAN LOPEZ LOPEZ</option>
          <option>GABRIEL GALVAN SALAZAR</option>
          <option>GABRIEL ORLANDO GARCIA ACEVEDO</option>
          <option>GABRIEL PACHECO JUAREZ</option>
          <option>GABRIEL SANTIAGO CONCHA</option>
          <option>GABRIEL TELLEZ TREVILLA</option>
          <option>GABRIELA ALAMILLA</option>
          <option>GABRIELA ALVARADO LUNA</option>
          <option>GABRIELA NUEZ GUARDADO</option>
          <option>GABRIELA OLIVIA REGALADO PORRAS</option>
          <option>GABRIELA SOFIA GOMEZ MACIAS</option>
          <option>GENOVEVA OCHOA</option>
          <option>GEORGINA GARNICA JALIFFE</option>
          <option>GEOVANI AMADOR GARCIA</option>
          <option>GERARDO AMARANTE DE LEON</option>
          <option>GERARDO CARDENAS</option>
          <option>GERARDO CASTORENA ROJI</option>
          <option>GERARDO DAVID AMARANTE DE LEON</option>
          <option>GERARDO GABRIEL MINAURO MUOZ</option>
          <option>GERARDO MIRANDA DEVORA</option>
          <option>GERMAN CALDERILLO CRUZ</option>
          <option>GERMAN CASTELAZO RAMIREZ</option>
          <option>GERMAN CASTELAZO RICO</option>
          <option>GILBERTO MORGAN VILLELA</option>
          <option>GISELA NIEVES HERNANDEZ RUIZ</option>
          <option>GLORIA MARTINEZ MARTINEZ</option>
          <option>GREDEL PORTELA RUBIO</option>
          <option>GREGORIO QUINTERO BEULO</option>
          <option>GUADALUPE EVARISTO CEDILLO SALAZAR</option>
          <option>GUILLERMO FABIAN SILVA ESCOBAR</option>
          <option>GUILLERMO GOCHER DAMIAN</option>
          <option>GUILLERMO MANUEL OLIVARES BELTRAN</option>
          <option>GUILLERMO MARTOS RAMIREZ</option>
          <option>GUSTAVO FLORENCIO CORTES MARTINEZ</option>
          <option>GUSTAVO JONY RAMOS BLAS</option>
          <option>GUSTAVO SEBASTIAN ESCOBAR ALFARO</option>
          <option>HAYDEE CRISTINA VERDUZCO AGUIRRE</option>
          <option>HEBER TOMAS REYES GARCIA</option>
          <option>HECTOR ARIAS CEBALLOS</option>
          <option>HECTOR DE LA MORA MOLINA</option>
          <option>HECTOR MARTINEZ SAID</option>
          <option>HECTOR RODRIGUEZ NAVARRO</option>
          <option>HERMINIA DEL SOCORRO ARVELO SAAVEDRA</option>
          <option>HIRAM JOSUE GRIMALDO ROQUE</option>
          <option>HORACIO DECANINI ARCAUTE</option>
          <option>HORACIO NOE LOPEZ BASAVE</option>
          <option>HORACIO SUAREZ DEL PUERTO</option>
          <option>IDELFONSO ROBERTO DE LA PEA LOPEZ</option>
          <option>IGNACIO JAIME PEREZ MARTINEZ</option>
          <option>IGNACIO MARISCAL RAMIREZ</option>
          <option>IGNACIO MIGUEL FUENTES MENDEZ</option>
          <option>ILEANA MCKINNEY NOVELO</option>
          <option>IRINEO DOMINGUEZ GABRIEL</option>
          <option>IRMA SOLDEVILLA GALLARDO</option>
          <option>IRVING JAVIER MEJIA HERNANDEZ</option>
          <option>ISAAC LUNA BENITEZ</option>
          <option>ITZEL VELA SARMIENTO</option>
          <option>ITZIA VERDUZCO FLORES</option>
          <option>IVAN EUDALDO DIAZ MENESES</option>
          <option>IVAN ORTIZ CALDERON</option>
          <option>IVAN ROMARICO GONZALEZ ESPINOZA</option>
          <option>IVAN SALGADO</option>
          <option>IVONNE SALAS</option>
          <option>JACKELINE GRACE LARA CAMPOS</option>
          <option>JAIME ALONSO RESENDIZ COLOSIA</option>
          <option>JAIME ARTURO GUEL</option>
          <option>JAIME CORONA RIVERA</option>
          <option>JAIME CORONA RIVERA</option>
          <option>JAIME J. TAMEZ SALAZAR</option>
          <option>JAIME NAVARRETE ALEMAN</option>
          <option>JAIME SHALKOW KLINCOVSTEIN.</option>
          <option>JANETT CABALLERO JASSO</option>
          <option>JANISSE KERSHENOVICH GERSSON</option>
          <option>JAQUELINE AGUIRRE GOMEZ</option>
          <option>JAVIER GARCIA ESTRADA</option>
          <option>JAVIER KELLY GARCIA</option>
          <option>JAVIER LOPEZ GOMEZ</option>
          <option>JAVIER MELCHOR RUAN</option>
          <option>JAZMIN FIGUEROA BADILLO</option>
          <option>JENNIFER RAMIREZ</option>
          <option>JERONIMO RAFAEL RODRIGUEZ CID</option>
          <option>JESSICA SALAZAR</option>
          <option>JESUS ALBERTO LIMON RODRIGUEZ</option>
          <option>JESUS ALICIA ACOSTA ESPINOZA</option>
          <option>JESUS ARMANDO SANCHEZ GONZALEZ</option>
          <option>JESUS ELVIS CABRERA LUVIANO</option>
          <option>JESUS MIGUEL LAZARO LEON</option>
          <option>JESUS RICO GUTIERREZ</option>
          <option>JHONATAN BUENO</option>
          <option>JOEL BAUELOS FLORES</option>
          <option>JONATHAN RUBEN CEDILLO RODRIGUEZ</option>
          <option>JORGE ADAN ALEGRIA BAOS</option>
          <option>JORGE ALBERTO GUADARRAMA OROZCO</option>
          <option>JORGE ALBERTO HERNANDEZ SALAZAR</option>
          <option>JORGE ALBERTO ROBLES AVIA</option>
          <option>JORGE ALBERTO SALAZAR ANDRADE</option>
          <option>JORGE ALEJANDRO CASTAEDA AVILA</option>
          <option>JORGE ANTONIO MACIAS MILLAN</option>
          <option>JORGE ARMANDO CASTELAN PEDRAZA</option>
          <option>JORGE ARTURO ALATORRE ALEXANDER</option>
          <option>JORGE BERMUDEZ LUGO</option>
          <option>JORGE EMILIO ARCH FERRER</option>
          <option>JORGE EMILIO ARCH FERRER</option>
          <option>JORGE ENRIQUE MONGES JONES</option>
          <option>JORGE LUIS CORTES RUBIO</option>
          <option>JORGE LUIS MARTINEZ RODRIGUEZ</option>
          <option>JORGE LUIS MARTINEZ TLAHUEL</option>
          <option>JORGE MARTINEZ CEDILLO</option>
          <option>JORGE MAYORGA ACUA</option>
          <option>JORGE SAID GARCIA BAUTISTA</option>
          <option>JOSE ADALBERTO TORIZ HERNANDEZ</option>
          <option>JOSE AGUIRRE TRIGUERO</option>
          <option>JOSE ALBERTO ABREGO VASQUEZ</option>
          <option>JOSE ANTONIO ACEVEDO DELGADO</option>
          <option>JOSE ANTONIO BAHENA GONZALEZ</option>
          <option>JOSE ANTONIO POSADA TORRES</option>
          <option>JOSE ANTONIO TREJO PANTOJA</option>
          <option>JOSE DE JESUS CURIEL VALDES</option>
          <option>JOSE EUGENIO VAZQUEZ</option>
          <option>JOSE FABIAN MARTINEZ HERRERA</option>
          <option>JOSE FRANCISCO ALEXANDER MEZA</option>
          <option>JOSE FRANCISCO CORONA CRUZ</option>
          <option>JOSE FRANCISCO GALLEGOS HERNANDEZ</option>
          <option>JOSE GABRIEL CHAVEZ SANCHEZ</option>
          <option>JOSE GADU CAMPOS SALCEDO</option>
          <option>JOSE GERARDO VELAZQUEZ OLGUIN</option>
          <option>JOSE GUSTAVO NUEZ CARRILLO</option>
          <option>JOSE JOB LAGUNES MUNOZ</option>
          <option>JOSE JOB LAGUNES MUOZ</option>
          <option>JOSE JUAN RAMIREZ JAIME</option>
          <option>JOSE LUIS AGUILAR PONCE</option>
          <option>JOSE LUIS ALVAREZ VERA</option>
          <option>JOSE LUIS GONZALEZ TRUJILLO</option>
          <option>JOSE LUIS GONZALEZ TRUJILLO</option>
          <option>JOSE LUIS GUZMAN MURGIA</option>
          <option>JOSE LUIS LOPEZ LOPEZ</option>
          <option>JOSE LUIS VELA GONZALEZ</option>
          <option>JOSE LUIS ZARAGOZA H.</option>
          <option>JOSE MANUEL ARTURO RUANO AGUILAR</option>
          <option>JOSE MANUEL RUIZ MORALES</option>
          <option>JOSE ROBERTO JUAREZ DIAZ</option>
          <option>JOSE RODRIGO ESPINOSA FERNANDEZ</option>
          <option>JOSE ROGELIO GONZALEZ RAMIREZ BENFIELD</option>
          <option>JOSEPH XAVIER LOPEZ KARKPOVITCH</option>
          <option>JUAN ADNAN CRUZ VALENZUELA</option>
          <option>JUAN ALBERTO SERRANO OLVERA</option>
          <option>JUAN ALBERTO TENORIO TORRES</option>
          <option>JUAN ALEJANDRO SILVA</option>
          <option>JUAN ANTONIO MATUS SANTOS</option>
          <option>JUAN CARLOS HERNANDEZ FONSECA</option>
          <option>JUAN CARLOS OLIVA POSADA</option>
          <option>JUAN CARLOS VAZQUEZ LIMON</option>
          <option>JUAN CARLOS ZAPOT MARTINEZ</option>
          <option>JUAN DE DIOS PEREZ VILLEGAS</option>
          <option>JUAN FERNANDO ARAGON SANCHEZ</option>
          <option>JUAN LORENZO ESPINO VILLALOBOS</option>
          <option>JUAN LUIS ABOITES LUCERO</option>
          <option>JUAN MANUEL STETA OROZCO</option>
          <option>JUAN MANUEL VARELA GAYOL</option>
          <option>JUAN WOLFGANG ZINZER SIERRA</option>
          <option>JULIO CESAR VELASCO RODRIGUEZ</option>
          <option>JULIO EDUARDO MARTINEZ SAMANO</option>
          <option>JUSTO GONZALO MILAN REVOLLO</option>
          <option>JULIO CESAR ABITIA CASTRO</option>
          <option>KARINA MURILLO MEDINA</option>
          <option>KARLA BELEN MOLINA TABAREZ</option>
          <option>KARLA SUSANA MARTIN TELLEZ</option>
          <option>KATHIA SUSANA ZAMUDIO OSUNA</option>
          <option>KATHIA SUSANA ZAMUDIO OSUNA</option>
          <option>KELLY GARCIA JAVIER</option>
          <option>KUAUHYAMA LUNA ORTIZ</option>
          <option>LAURA GABRIELA FLORES PEA</option>
          <option>LAURA PEREZ MICHEL</option>
          <option>LAURA TORRECILLAS TORRES</option>
          <option>LENNY NADIA GALLARDO ALVARADO</option>
          <option>LEONORA VALDEZ ROJAS</option>
          <option>LEOPOLDO ABRAHAM LUGO ALFEREZ</option>
          <option>LEOPOLDO GUZMAN NAVARRO</option>
          <option>LETICIA ELIZABETH MOTA GARDUO</option>
          <option>LETICIA VAZQUEZ CORTES</option>
          <option>LIDO JOSE MANUEL GOMEZ GLEZ</option>
          <option>LIGIA LARRALDE</option>
          <option>LIZ NAVA</option>
          <option>LUCELY DEL CARMEN CETINA PEREZ</option>
          <option>LUIIS ANTONIO NUEZ TRENADO</option>
          <option>LUIS ALBERTO GARCIA GONZALEZ</option>
          <option>LUIS ANTONIO CABRERA MIRANDA</option>
          <option>LUIS ANTONIO CANCEL TREVIO</option>
          <option>LUIS ANTONIO LARA MEJIA</option>
          <option>LUIS ANTONIO MEILLON GARCIA</option>
          <option>LUIS ARTURO CARDOSO APARICIO</option>
          <option>LUIS ARTURO HERNANDEZ LOPEZ</option>
          <option>LUIS CRUZ BENITEZ</option>
          <option>LUIS ENRIQUE JUAREZ VILLEGAS</option>
          <option>LUIS ENRIQUE SOTO</option>
          <option>LUIS FERNANDO PEREZ JACOBO</option>
          <option>LUIS GERARDO MOTA CIENFUEGOS</option>
          <option>LUIS JAVIER BARAJAS FIGUEROA</option>
          <option>LUIS JONATHAN BUENO ROSARIO</option>
          <option>LUZ MARIA HINOJOSA GARCIA</option>
          <option>LUZ MARIA RIVAS CORCHADO</option>
          <option>MA DE LOURDES GUTIERREZ RIVERA</option>
          <option>MA DELIA PEREZ MONTIEL</option>
          <option>MA ISABEL ENRIQUEZ ACEVES</option>
          <option>MANUEL ACUA TOVAR</option>
          <option>MANUEL ALONSO VILLEGAS MARTINEZ</option>
          <option>MANUEL GONZALEZ REYES</option>
          <option>MANUEL ISMAEL GONZALEZ GERONIZ</option>
          <option>MANUEL MAGALLANES</option>
          <option>MANUEL ROBERTO MORALES POLANCO</option>
          <option>MARA NUEZ TOSCANO</option>
          <option>MARCELINO MORALES RIVERA</option>
          <option>MARCELINO RAMIREZ MARQUEZ</option>
          <option>MARCO ANTONIO DE LA ROSA ABAROA</option>
          <option>MARCOS FABIAN MONZALVO HERNANDEZ</option>
          <option>MARCOS LOPEZ NAVEDA</option>
          <option>MARGARITA CAMPUZANO BUENROSTRO</option>
          <option>MARIA ANDREA BARBERO IBARROLA</option>
          <option>MARIA CRISTINA AGUILAR MARTINEZ</option>
          <option>MARIA DE LA LUZ GARCA TINOCO</option>
          <option>MARIA DEL CONSUELO DIAZ ROMERO</option>
          <option>MARIA DEL MAR GARCIA ORTEGA</option>
          <option>MARIA DEL ROSARIO ESTRADA FALCON</option>
          <option>MARIA DOLORES DE LA MATA MOYA</option>
          <option>MARIA DOLORES SALAS AGUIRRE</option>
          <option>MARIA ELISA OTEIRO CERDEIRA</option>
          <option>MARIA EUGENIA SALINAS NIEVES</option>
          <option>MARIA FATIMA CHILACA ROSAS</option>
          <option>MARIA GUADALUPE VILLA GRAJEDA</option>
          <option>MARIA GUADLUPE CERVANTES SANCHEZ</option>
          <option>MARIA HELENA VILLALOBOS GOMEZ</option>
          <option>MARIA LUISA ROMERO LAGUNES</option>
          <option>MARIA PAULA HERNANDEZ</option>
          <option>MARIA PAZ COVARRUBIAS RODRIGUEZ</option>
          <option>MARIA TERESA BOURLON DE LO RIOS</option>
          <option>MARIA TERESA CERVANTES DIAZ</option>
          <option>MARIANA MONSERRAT GOMEZ JARA</option>
          <option>MARICELA GARCIA GARCES</option>
          <option>MARINEE TORRES AGUILAR</option>
          <option>MARIO CUELLAR HUBBE</option>
          <option>MARIO EDUARDO ALONSO CALAMACO</option>
          <option>MARIO SANCHEZ CORZO</option>
          <option>MARISOL RIVERA HERNANDEZ</option>
          <option>MARLID CRUZ RAMOS</option>
          <option>MARTHA GABRIELA TAVERA RODRIGUEZ</option>
          <option>MARYTERE HERRERA MARTINEZ</option>
          <option>MAURICIO ANTUAN CANAVATI MARCOS</option>
          <option>MAXWELL AVILES RODRIGUEZ</option>
          <option>MAYRA CRISTINA GALEANA HERNANDEZ</option>
          <option>MICHEL BONIFANT</option>
          <option>MICHEL HERNANDEZ VALADEZ</option>
          <option>MIGUEL ANGEL ALVAREZ AVITIA</option>
          <option>MIGUEL ANGEL ARAUJO MELENDEZ</option>
          <option>MIGUEL ANGEL LOPEZ VALLE</option>
          <option>MIGUEL ANGEL MONROY RAMIREZ</option>
          <option>MIGUEL ANGEL TLETLEPANTZIN APARTADO</option>
          <option>MIGUEL ARNOLDO FARIAS ALARCON</option>
          <option>MIGUEL CORRES MOLINA</option>
          <option>MIGUEL NORIEGA JUAREZ</option>
          <option>MIJAEL TOIBER LEVY</option>
          <option>MILAGROS PEREZ QUINTANILLA</option>
          <option>MINOR CORDERO B.</option>
          <option>MOISES ZEFERINO TOQUERO</option>
          <option>MONICA ISABEL MENESES MEDINA</option>
          <option>MYRNA GLORIA CANDELARIA HERNANDEZ</option>
          <option>NATIVIDAD NERI MUOZ</option>
          <option>NEREIDA ESPARZA ARIAS</option>
          <option>NICOLAS RICARDO DE JESUS SANCHEZ CASAS</option>
          <option>NICOLE MARIE IIGUEZ ARIZA</option>
          <option>NIDIA  PAULINA ZAPATA CANTO</option>
          <option>NOE FLORES</option>
          <option>NORA HILDA CHAVEZ HERNANDEZ</option>
          <option>NORA MARIA PEREZ HRNANDEZ</option>
          <option>NORA SOBREVILLA MORENO</option>
          <option>NORMA CANDELARIA LOPEZ SANTIAGO</option>
          <option>NOVELTHYS VELASCO CORTES</option>
          <option>ODILON FELIX QUIJANO CASTRO</option>
          <option>OMAR ALEJANDRO ZAYAS VILLANUEVA</option>
          <option>OMAR CHAVEZ</option>
          <option>OMAR DE LEON PACHECO</option>
          <option>OMAR FRANCISCO CORONEL AYALA</option>
          <option>OMAR MACEDO PEREZ</option>
          <option>OMAR PEA CURIEL</option>
          <option>OSCAR ALEJANDRO GOMEZ</option>
          <option>OSCAR ARMANDO MELHADO ORELLANA</option>
          <option>OSCAR ARMANDO MELHADO ORELLANA</option>
          <option>OSCAR GERARDO ARRIETA RODRIGUEZ</option>
          <option>OSCAR SALVADOR SANCHEZ VELAZQUEZ</option>
          <option>OSCAR VIDAL GUTIERREZ</option>
          <option>OSVALDO HERNANDEZ FLORES</option>
          <option>OSVALDO QUIROZ SANDOVAL</option>
          <option>OTONIEL LOPEZ RIVEROL</option>
          <option>PAMELA AYALA HERNANDEZ</option>
          <option>PATRICIA CORTES ESTEBAN</option>
          <option>PATRICIA PADILLA ARRIETA</option>
          <option>PATRICIO AZAOLA ESPINOZA</option>
          <option>PAULA ANEL CABRERA GALEANA</option>
          <option>PEDRO DE JESUS SOBREVILLA CALVO</option>
          <option>PEDRO LUNA MERLOS</option>
          <option>PEDRO LUNA PEREZ</option>
          <option>PEDRO ROBLES NOLAZCO</option>
          <option>RAFAEL BRICEO HERNANDEZ</option>
          <option>RAFAEL HURTADO MONROY</option>
          <option>RAFAEL MEDRANO GUZMAN</option>
          <option>RAFAEL PADILLA LONGORIA</option>
          <option>RAFAEL VAZQUEZ ROMO</option>
          <option>RAMIRO GARCIA ORTIZ</option>
          <option>RAMIRO MAGANA SERRANO</option>
          <option>RAMON JESUS MARTELL GUERRERO</option>
          <option>RAQUEL GERSON CWILICH</option>
          <option>RAUL ARTGUZMAN TRIGUEROS</option>
          <option>RAUL GARZA GARZA</option>
          <option>RAUL GERARDO RAMIREZ MEDINA</option>
          <option>RENE GOMEZ CERDA</option>
          <option>RICARDO CAVAZOS GARCIA</option>
          <option>RICARDO CAVAZOS GARCIA</option>
          <option>ROBERTO ALFARO LARA</option>
          <option>ROBERTO DE LA PENA LOPEZ</option>
          <option>ROBERTO ENRIQUE HERNANDEZ PEA</option>
          <option>ROBERTO KURI EXSOME</option>
          <option>ROBERTO KURI EXSOME</option>
          <option>ROBERTO RIVERA LUNA</option>
          <option>ROBIN JENNIFER SHAW DULIN</option>
          <option>ROCIO CRYSTAL GRAJALES ALVAREZ</option>
          <option>ROCIO DEL SOCORRO CARDENAS CARDOS</option>
          <option>RODRIGO ARRANGOIZ MAJUL</option>
          <option>RODRIGO DIAZ MACHORRO</option>
          <option>RODRIGO YAHEL ADAME MORENO</option>
          <option>ROGELIO LOZANO GALVAN</option>
          <option>ROGELIO MARTINEZ MACIAS</option>
          <option>ROLANDO MARTINEZ</option>
          <option>ROMMEL IVAN RODRIGUEZ SIMENTAL</option>
          <option>ROSA HIMELDA ARELLANO BERNAL</option>
          <option>ROSA LUZ LUNA PLACENCIA</option>
          <option>ROSARIO MARISOL QUINTERO SOLIS</option>
          <option>RUBEN CORTES GONZALEZ</option>
          <option>RUBI JANDAY NAJERA</option>
          <option>SALIM ABRAHAM BARQUET MUOZ</option>
          <option>SALVADOR MACIAS DIAZ</option>
          <option>SALVADOR NAVARRO HERNANDEZ</option>
          <option>SAMANTHA LOPEZ RAMIREZ</option>
          <option>SAMUEL RIVERA RIVERA</option>
          <option>SANTA MARICELA ORTIZ ZEPEDA</option>
          <option>SANTIAGO ALEJANDRO CANO CANCELA</option>
          <option>SANTOS GILBERTO SOTO GERMES</option>
          <option>SARA OLIVIA RAMOS ROMERO</option>
          <option>SARISH DEL REAL ORDOEZ</option>
          <option>SAUL CAMPOS GOMEZ</option>
          <option>SEBASTIAN GARCIA HERRERA</option>
          <option>SEIR ALFONSO CORTES CARDENAS</option>
          <option>SERGIO AGUILAR VILLANUEVA</option>
          <option>SERGIO CARLOS RODRIGUEZ BAHENA</option>
          <option>SERGIO CESAR LOPEZ GARCI A</option>
          <option>SERGIO PEDRAZA BARAJAS</option>
          <option>SERGIO RODRIGUEZ-CUEVAS</option>
          <option>SERGIO TORRES VARGAS</option>
          <option>SERGIO YASPIK FLORES</option>
          <option>SERVANDO CARDONA HUERTA</option>
          <option>SIGMUND RODRIGUEZ ROJAS</option>
          <option>SILVIA MARGARITA ALVARFEZ MALDONADO</option>
          <option>SILVIA NATALIA LOPEZ HERNANDEZ</option>
          <option>SILVIA PATRICIA VILLAREAL COLIN</option>
          <option>TALIA WEGMAN OSTROSKY</option>
          <option>TALINA RAMIREZ CARO</option>
          <option>TANIA ALVAREZ DOMINGUEZ</option>
          <option>VANESSA ROSAS CAMARGO</option>
          <option>VICTOR ALFONSO MARTINEZ DIAZ</option>
          <option>VICTOR HUGO CARMONA ORNELA S</option>
          <option>VICTOR MANUEL MARROQUIN TORRES</option>
          <option>VICTOR MANUEL OYERVIDES JUAREZ</option>
          <option>VICTOR RAMON ANDRADE SEPULVEDA</option>
          <option>WENDY ROSANGELA MARTINEZ TORRES</option>
          <option>WENDY ROSSEMARY MUOZ MONTAO</option>
          <option>XIMENA FERNANDEZ SOTO</option>
          <option>XINOTECATL JIMENEZ VILLANUEVA</option>
          <option>YAMILE TORRES JASSO</option>
          <option>YANIN CHAVARRI GUERRA</option>
          <option>YAZMIN CAROLINA BLANCO VAZQUEZ</option>
          <option>YOLANDA LIZBETH BAUTISTA ARAGON</option>
          <option>YURIDIA ALVARADO BERNAL</option>
          <option>YVETTE NEME YUNES</option>
          <option>ZULEIMA GARCIA NIETO</option>

          </select>
          <div id="nuevoMedicoWrapper" class="field-group hidden" style="margin-top:6px;">
            <label for="nombreMedicoNuevo">Nuevo m茅dico</label>
            <input type="text" id="nombreMedicoNuevo" placeholder="Escribe el nombre completo">
          </div>
          <input type="hidden" id="nombreMedico" name="nombreMedico">
        </div>
      </div>
      <div class="row">
        <div class="field-group col-2">
          <label for="especialidadMedico">Especialidad del M茅dico <span class="required">*</span></label>
          <input type="text" id="especialidadMedico" name="especialidadMedico" required>
        </div>
        <div class="field-group col-2">
          <label for="emailMedico">Email del m茅dico <span class="required">*</span></label>
          <input type="email" id="emailMedico" name="emailMedico" required>
        </div>
      </div>
      <div class="field-group">
        <label for="honorarioMedico">Aplica Honorario M茅dico (Monto) <span class="required">*</span></label>
        <input type="text" id="honorarioMedico" name="honorarioMedico">
      </div>

      <div class="section-title">Datos del paciente</div>
      <div class="row">
        <div class="field-group col-2">
          <label for="pacienteNombre">Nombre del paciente completo <span class="required">*</span></label>
          <input type="text" id="pacienteNombre" name="pacienteNombre" required>
        </div>
      </div>
      <div class="field-group">
        <label for="telefonoContacto">Tel茅fono del contacto para seguimiento <span class="required">*</span></label>
        <input type="tel" id="telefonoContacto" name="telefonoContacto" required>
      </div>

      <div class="row">
        <div class="field-group col-2">
          <label for="diagnostico">Diagn贸stico <span class="required">*</span></label>
          <input type="text" id="diagnostico" name="diagnostico" required>
        </div>
        <div class="field-group col-2">
          <label for="estadio">Estadio <span class="required">*</span></label>
          <input type="text" id="estadio" name="estadio" required>
        </div>
      </div>

      <div class="section-title">Informaci贸n cl铆nica</div>
      <div class="row">
        <div class="field-group col-2">
          <label for="fechaCirugia">Fecha de Cirug铆a <span class="required">*</span></label>
          <input type="date" id="fechaCirugia" name="fechaCirugia" required>
        </div>
        <div class="field-group col-2">
          <label for="fechaBiopsia">Fecha de la 煤ltima biopsia <span class="required">*</span></label>
          <input type="date" id="fechaBiopsia" name="fechaBiopsia" required>
        </div>
      </div>
      <div class="field-group">
        <label for="fechaNacimiento">Fecha de nacimiento</label>
        <input type="date" id="fechaNacimiento" name="fechaNacimiento">
      </div>
      <div class="field-group">
        <label for="tipoEstudio">Tipo de estudio <span class="required">*</span></label>
        <select id="tipoEstudio" name="tipoEstudio" required>
          <option value="">Selecciona una opci贸n</option>
          <option>Somatico</option>
          <option>Germinal</option>
        </select>
      </div>

      <div class="section-title">Tipo de prueba</div>
      <div class="field-group">
        <label for="nombreEstudio">Nombre del estudio <span class="required">*</span></label>
        <select id="nombreEstudio" name="nombreEstudio" required onchange="handleEstudioChange()">
          <option value="">Selecciona una opci贸n</option>
          <option>FoundationOne CDx</option>
          <option>FoundationOne Liquid CDx</option>
          <option>FoundationOne Heme</option>
          <option>Avenio Roche Tisssue</option>
          <option>Examen OncolDX Complete ctDNA</option>
          <option>MammaPrint</option>
          <option>Guardant360 CDx</option>
          <option>Guardant360 CDx Expanded</option>
          <option>Guardant Health Reveal</option>
          <option>Tempus xF</option>
          <option>Tempus xF+</option>
          <option>Tempus xT</option>
          <option>Tempus xT + xR</option>
          <option>INVITAE Panel multicancer</option>
          <option>INVITAE Common hereditary Cancer</option>
          <option>INVITAE Hereditary Breast Cancer STAT Panel</option>
        </select>
      </div>
      
      <div class="field-group">
        <label for="montoPrueba">Monto de prueba <span class="required">*</span></label>
        <input type="text" id="montoPrueba" name="montoPrueba" required>
      </div>
<div id="biomarcadorTempus" class="field-group hidden">
        <label>Biomarcador (opcional, solo si aplica para Tempus)</label>
        <div class="biomarcador-list">
          <label><input type="checkbox" name="biomarcadorOpcional" value="Biomarcador PDL 1"> Biomarcador PDL 1</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="Biomarcador HRD"> Biomarcador HRD</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="Biomarcador MMR"> Biomarcador MMR</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="Biomarcador PDY"> Biomarcador PDY</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="Biomarcador HER 2"> Biomarcador HER 2</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="Biomarcador HER2 + FISH"> Biomarcador HER2 + FISH</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="Biomarcador FOLR1"> Biomarcador FOLR1</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="MGMT Methylation"> MGMT Methylation</label>
          <label><input type="checkbox" name="biomarcadorOpcional" value="Algorithmic Tumor Origin"> Algorithmic Tumor Origin</label>
        </div>
      </div>

<div id="biomarcadorFoundation" class="field-group hidden">
        <label for="biomarcadorFoundationOpcional">Biomarcador (opcional, solo si aplica para FoundationOne)</label>
        <select id="biomarcadorFoundationOpcional" name="biomarcadorFoundationOpcional">
          <option value="">Sin biomarcador</option>
          <option>Biomarcador PDL 1</option>
          <option>UGT1A1</option>
          <option>POLE / POLD1</option>
          <option>PDL1 SP263 y 22C3</option>
          <option>CLDN18</option>
          <option>cMET</option>
        </select>
      </div>


      <div class="section-title">Forma de pago</div>
      <div class="field-group">
        <label for="formaPago">Forma de Pago <span class="required">*</span></label>
        <select id="formaPago" name="formaPago" required onchange="handleFormaPagoChange()">
          <option value="">Selecciona una opci贸n</option>
          <option value="Bolsillo">Bolsillo</option>
          <option value="Aseguradora">Aseguradora</option>
        </select>
      </div>
      <div id="pagoBolsillo" class="field-group hidden">
        <label for="detalleBolsillo">Bolsillo <span class="required">*</span></label>
        <select id="detalleBolsillo" name="detalleBolsillo">
          <option value="">Selecciona una opci贸n</option>
          <option>Efectivo</option>
          <option>Transferencia</option>
          <option>Liga de Pago</option>
          <option>Terminal</option>
        </select>
      </div>
      <div id="pagoAseguradora" class="field-group hidden">
        <label for="nombreAseguradora">Nombre Aseguradora <span class="required">*</span></label>
        <select id="nombreAseguradora" name="nombreAseguradora">
          <option value="">Selecciona una opci贸n</option>
          <option>Inbursa</option>
          <option>Plan Seguros</option>
          <option>Internacional</option>
          <option>Prevem</option>
          <option>Best Doctors</option>
          <option>Global Excel</option>
          <option>Atlas</option>
          <option>GNP</option>
          <option>Axa (Sohin)</option>
          <option>Seguros MTY</option>
          <option>Zurich</option>
          <option>Metlife</option>
          <option>Otra</option>
        </select>
      </div>

      <div class="section-title">Solicitud y archivos</div>
      <div class="field-group">
        <label for="solicitud">Solicitud <span class="required">*</span></label>
        <select id="solicitud" name="solicitud" required>
          <option value="">Selecciona una opci贸n</option>
          <option>Toma de Muestra</option>
          <option>Recoleccion de Muestras</option>
          <option>Tramite con Aseguradora</option>
          <option>Otro (describir en comentarios)</option>
        </select>
      </div>
      <div class="field-group files-input">
        <label for="archivosPrincipales">Adjunta tus archivos</label>
        <div style="margin:4px 0; font-size:12px;">
          <a
            href="https://drive.google.com/drive/folders/1SvJEEKCjNHf8YDmrwJCFOhRqrWwUjDQ4?usp=sharing"
            target="_blank"
            rel="noopener noreferrer"
          >
             Abrir carpeta de Google Drive para adjuntar tus archivos
          </a>
        </div>
        <input type="file" id="archivosPrincipales" name="archivosPrincipales" multiple style="display:none;">
      </div>
      <div class="field-group files-input" style="display:none;">
        <label for="archivosAdicionales">Adjunta + documentos</label>
        <div style="margin:4px 0; font-size:12px;">
          <a
            href="https://drive.google.com/drive/folders/1SvJEEKCjNHf8YDmrwJCFOhRqrWwUjDQ4?usp=sharing"
            target="_blank"
            rel="noopener noreferrer"
          >
             Abrir carpeta de Google Drive para adjuntar documentos adicionales
          </a>
        </div>
        <input type="file" id="archivosAdicionales" name="archivosAdicionales" multiple>
      </div>
      <div class="field-group">
        <label for="comentarios">Comentarios</label>
        <textarea id="comentarios" name="comentarios"></textarea>
      </div>

      <button type="submit" class="btn-primary">Enviar / Generar JSON</button>
    </form>

    <div id="result" class="result-box hidden"></div>
    <div id="mensajeExito" class="success-message hidden">
      Registro enviado correctamente.
      <div class="success-actions">
        <a id="linkCorreo" href="#" target="_blank" class="success-link">Enviar por correo</a>
        <a id="linkWhatsApp" href="#" target="_blank" class="success-link">Enviar por WhatsApp</a>
      </div>
    </div>
  </div>

  
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAzJZHEkbOkW8D_xeqHTO-y9bcCDW5ZQw",
    authDomain: "formulario-nomad.firebaseapp.com",
    projectId: "formulario-nomad",
    storageBucket: "formulario-nomad.firebasestorage.app",
    messagingSenderId: "36365021080",
    appId: "1:36365021080:web:af4e9158d54b8bedf685ed"
  };
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  const db = firebase.firestore();
  const storage = firebase.storage();
</script>

<script>
    
    // Directorio telef贸nico de KAMs para WhatsApp
    const KAM_TELEFONOS = {
      "Francisco": "5554360130",
      "Inplant": "5551903380",
      "Marymar": "5543401015",
      "Angel": "5579681460",
      "Andrea": "5579681304",
      "Nereida": "5580559686"
    };
    const KAM_CORREOS = {
      "Francisco": "josefrancisco.munoz@nomadgenetics.com",
      "Marymar": "ger.genomica@nomadgenetics.com",
      "Angel": "kam2.mx@nomadgenetics.com",
      "Andrea": "kam3.mx@nomadgenetics.com",
      "Nereida": "kam.mty1@nomadgenetics.com",
      "Claudia": "kam.gdl1@nomadgenetics.com",
      "Melina": "backoffice@nomadgenetics.com",
      "Karla": "log.mx@nomadgenetics.com"
    };
    
    function formatearPesos(valor) {
      if (valor == null) return "";
      if (typeof valor !== "string") valor = String(valor);
      const limpio = valor.replace(/[^0-9,\.\-]/g, "").replace(",", ".");
      const numero = parseFloat(limpio);
      if (isNaN(numero)) return valor || "";
      return "$ " + numero.toLocaleString("es-MX", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    (function() {
      var campoHonorario = document.getElementById("honorarioMedico");
      if (campoHonorario) {
        campoHonorario.addEventListener("blur", function() {
          this.value = formatearPesos(this.value);
        });
      }
      var campoMontoPrueba = document.getElementById("montoPrueba");
      if (campoMontoPrueba) {
        campoMontoPrueba.addEventListener("blur", function() {
          this.value = formatearPesos(this.value);
        });
      }
    })();

function handleEstudioChange() {
      const estudio = document.getElementById("nombreEstudio").value;
      const biomTempusDiv = document.getElementById("biomarcadorTempus");
      const biomTempusCheckboxes = document.querySelectorAll("#biomarcadorTempus input[name=\"biomarcadorOpcional\"]");
      const biomFoundDiv = document.getElementById("biomarcadorFoundation");
      const biomFoundSel = document.getElementById("biomarcadorFoundationOpcional");
      const esTempus = estudio.startsWith("Tempus");
      const esFoundation = estudio.startsWith("FoundationOne");

      if (esTempus) {
        if (biomTempusDiv) biomTempusDiv.classList.remove("hidden");
        if (biomFoundDiv) biomFoundDiv.classList.add("hidden");
        if (biomFoundSel) biomFoundSel.value = "";
      } else if (esFoundation) {
        if (biomTempusDiv) {
          biomTempusDiv.classList.add("hidden");
          biomTempusCheckboxes.forEach(cb => cb.checked = false);
        }
        if (biomFoundDiv) biomFoundDiv.classList.remove("hidden");
      } else {
        if (biomTempusDiv) {
          biomTempusDiv.classList.add("hidden");
          biomTempusCheckboxes.forEach(cb => cb.checked = false);
        }
        if (biomFoundDiv) biomFoundDiv.classList.add("hidden");
        if (biomFoundSel) biomFoundSel.value = "";
      }
    }
    function handleFormaPagoChange() {
      const forma = document.getElementById("formaPago").value;
      const bolsillo = document.getElementById("pagoBolsillo");
      const aseg = document.getElementById("pagoAseguradora");
      bolsillo.classList.add("hidden");
      aseg.classList.add("hidden");
      if (forma === "Bolsillo") bolsillo.classList.remove("hidden");
      if (forma === "Aseguradora") aseg.classList.remove("hidden");
    }
    function handleMedicoSelectChange() {
      const sel = document.getElementById("medicoSelect");
      const nuevoWrap = document.getElementById("nuevoMedicoWrapper");
      const nuevoInput = document.getElementById("nombreMedicoNuevo");
      const hidden = document.getElementById("nombreMedico");
      if (sel.value === "_nuevo") {
        nuevoWrap.classList.remove("hidden");
        hidden.value = nuevoInput.value || "";
      } else {
        nuevoWrap.classList.add("hidden");
        nuevoInput.value = "";
        hidden.value = sel.value;
      }
    }
    document.getElementById("nombreMedicoNuevo").addEventListener("input", function() {
      const hidden = document.getElementById("nombreMedico");
      hidden.value = this.value;
    });
    
  function guardarEnFirebase(obj, archivosPrincipales, archivosAdicionales, registro) {
    try {
      if (typeof firebase === "undefined") {
        console.warn("Firebase no est谩 disponible en esta p谩gina.");
        return;
      }

      const nombresPrincipales = Array.from(archivosPrincipales || []).map(f => f.name);
      const nombresAdicionales = Array.from(archivosAdicionales || []).map(f => f.name);

      const docData = Object.assign({}, obj, {
        archivosPrincipales: nombresPrincipales,
        archivosAdicionales: nombresAdicionales,
        registroResumen: registro,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });

      db.collection("ingresosNomad").add(docData)
        .then(function(docRef) {
          const uploads = [];

          Array.from(archivosPrincipales || []).forEach(function(file) {
            const ref = storage.ref().child(`ingresosNomad/${docRef.id}/principales/${file.name}`);
            uploads.push(ref.put(file));
          });

          Array.from(archivosAdicionales || []).forEach(function(file) {
            const ref = storage.ref().child(`ingresosNomad/${docRef.id}/adicionales/${file.name}`);
            uploads.push(ref.put(file));
          });

          return Promise.all(uploads).then(function() {
            const registroConId = Object.assign({}, registro, { firebaseId: docRef.id });
            const existentes = JSON.parse(localStorage.getItem("nomad_registros") || "[]");
            existentes.push(registroConId);
            localStorage.setItem("nomad_registros", JSON.stringify(existentes));
          });
        })
        .then(function() {
          console.log("Registro y archivos guardados correctamente en Firebase y resumen almacenado en localStorage.");
        })
        .catch(function(err) {
          console.error("Error al guardar en Firebase:", err);
          alert("Ocurri贸 un error al guardar los datos en Firebase. Revisa la consola para m谩s detalles.");
        });
    } catch (e) {
      console.error("Excepci贸n al guardar en Firebase:", e);
    }
  }

function handleSubmit(ev) {
    ev.preventDefault();
    const sel = document.getElementById("medicoSelect");
    const nuevo = document.getElementById("nombreMedicoNuevo");
    const hidden = document.getElementById("nombreMedico");
    if (!hidden.value) {
      if (sel.value === "_nuevo" && !nuevo.value.trim()) {
        alert("Escribe el nombre del nuevo m茅dico.");
        return;
      }
    }
    const form = ev.target;
    const data = new FormData(form);
    const obj = {};
    for (const [k,v] of data.entries()) {
      if (obj[k]) {
        if (!Array.isArray(obj[k])) obj[k] = [obj[k]];
        obj[k].push(v);
      } else {
        obj[k] = v;
      }
    }

    // Unificar selecci贸n m煤ltiple de biomarcadores Tempus en una sola cadena
    if (Array.isArray(obj.biomarcadorOpcional)) {
      obj.biomarcadorOpcional = obj.biomarcadorOpcional.join(", ");
    }

    const archivosPrincipales = document.getElementById("archivosPrincipales").files;
    const archivosAdicionales = document.getElementById("archivosAdicionales").files;
    obj.archivosPrincipales = Array.from(archivosPrincipales).map(f => f.name);
    obj.archivosAdicionales = Array.from(archivosAdicionales).map(f => f.name);
    const result = document.getElementById("result");
    result.classList.remove("hidden");
    result.textContent = JSON.stringify(obj, null, 2);

    const tipoPago = obj.formaPago === "Bolsillo"
      ? "BOLSILLO" + (obj.detalleBolsillo ? " - " + obj.detalleBolsillo : "")
      : (obj.formaPago === "Aseguradora" ? "ASEGURADORA" : "");

    const registro = {
      "FECHA DE CARGA": new Date().toISOString(),
      "KAM": obj.kam || "",
      "HOSPITAL": obj.institucion || "",
      "ESTADO": obj.ciudad || "",
      "NOMBRE DEL PACIENTE": obj.pacienteNombre || "",
      "PRUEBA": obj.nombreEstudio || "",
      "Biomarcadores Tempus": obj.biomarcadorOpcional || "",
      "Nombre Aseguradora": obj.formaPago === "Aseguradora" ? (obj.nombreAseguradora || "") : "",
      "TIPO DE PAGO": tipoPago,
      "NOMBRE DEL MEDICO": obj.nombreMedico || "",
      "PAGO AL KAM": "",
      "Aplica Honorario M茅dico (Monto)": obj.honorarioMedico || "",
      "STATUS": "",
      "FECHA DE ENVIO": "",
      "FECHA DE COMPLETADO": "",
      "OBSERVACIONES": obj.comentarios || "",
      "Monto de prueba": obj.montoPrueba || "",
      "Monto de prueba editable": "",
      "OPCION LOGISTICA": ""
    };

    // Guardar en Firebase (Firestore + Storage)
    guardarEnFirebase(obj, archivosPrincipales, archivosAdicionales, registro);

    // Preparar mensaje de resumen para compartir
    const telefonoKAM = obj.kam && KAM_TELEFONOS[obj.kam] ? KAM_TELEFONOS[obj.kam] : "";
    const resumenTexto =
      "Nuevo registro Nomad" + "\n\n" +
      "KAM: " + (obj.kam || "") + "\n" +
      (telefonoKAM ? ("Tel茅fono KAM: " + telefonoKAM + "\n") : "") +
      "Hospital: " + (obj.institucion || "") + "\n" +
      "Estado: " + (obj.ciudad || "") + "\n" +
      "Paciente: " + (obj.pacienteNombre || "") + "\n" +
      "Prueba: " + (obj.nombreEstudio || "") + "\n" +
      "Biomarcadores Tempus: " + (obj.biomarcadorOpcional || "Sin biomarcador") + "\n" +
      "Monto de prueba: " + (obj.montoPrueba || "") + "\n" +
      "Forma de pago: " + (obj.formaPago || "") + "\n";

    const asunto = "Nuevo registro Nomad - " + (obj.nombreEstudio || "");
    const linkCorreo = document.getElementById("linkCorreo");
    const linkWhatsApp = document.getElementById("linkWhatsApp");

    if (linkCorreo) {
      // Si el KAM tiene correo configurado, usarlo como destinatario.
      let correoDestino = "";
      if (obj.kam && KAM_CORREOS[obj.kam]) {
        correoDestino = KAM_CORREOS[obj.kam];
      }
      // Abrir directamente el compositor de Gmail en una nueva pesta帽a
      const gmailHref = "https://mail.google.com/mail/?view=cm&fs=1"
        + (correoDestino ? "&to=" + encodeURIComponent(correoDestino) : "")
        + "&su=" + encodeURIComponent(asunto)
        + "&body=" + encodeURIComponent(resumenTexto);
      linkCorreo.href = gmailHref;
    }

    if (linkWhatsApp) {
      // Usar el WhatsApp del KAM seleccionado (si existe en el directorio)
      let telefonoWhats = "";
      if (obj.kam && KAM_TELEFONOS[obj.kam]) {
        // Asumimos n煤meros de M茅xico; se antepone 52
        telefonoWhats = "52" + KAM_TELEFONOS[obj.kam];
      }
      let waHref;
      if (telefonoWhats) {
        waHref = "https://wa.me/" + telefonoWhats + "?text=" + encodeURIComponent(resumenTexto);
      } else {
        // Si no hay n煤mero configurado para ese KAM, abrir WhatsApp sin n煤mero fijo
        waHref = "https://wa.me/?text=" + encodeURIComponent(resumenTexto);
      }
      linkWhatsApp.href = waHref;
    }

    const mensajeExito = document.getElementById("mensajeExito");
    if (mensajeExito) {
      mensajeExito.classList.remove("hidden");
      mensajeExito.scrollIntoView({ behavior: "smooth", block: "center" });
    }

    form.reset();
    document.getElementById("result").classList.add("hidden");
  }

  // Mini buscador para la lista de m茅dicos
  let medicoOptionsOriginal = [];
  let medicoPlaceholderOption = null;

  document.addEventListener("DOMContentLoaded", function () {
    const select = document.getElementById("medicoSelect");
    if (!select) return;
    const options = Array.from(select.options);
    if (options.length === 0) return;
    // Guardamos la opci贸n de placeholder (primera opci贸n)
    medicoPlaceholderOption = {
      value: options[0].value,
      text: options[0].textContent || options[0].innerText || ""
    };
    // Guardamos el resto de opciones originales
    medicoOptionsOriginal = options.slice(1).map(function (opt) {
      return {
        value: opt.value,
        text: opt.textContent || opt.innerText || ""
      };
    });
  });

  function filterMedicos() {
    const input = document.getElementById("medicoSearch");
    const select = document.getElementById("medicoSelect");
    if (!input || !select || medicoOptionsOriginal.length === 0) return;

    const filtro = input.value.trim().toLowerCase();

    // Limpiar opciones actuales
    select.innerHTML = "";

    // Volver a agregar el placeholder
    if (medicoPlaceholderOption) {
      const ph = document.createElement("option");
      ph.value = medicoPlaceholderOption.value;
      ph.textContent = medicoPlaceholderOption.text;
      select.appendChild(ph);
    }

    // Agregar solo las opciones que coincidan con el filtro
    medicoOptionsOriginal.forEach(function (optData) {
      if (filtro === "" || optData.text.toLowerCase().indexOf(filtro) !== -1) {
        const opt = document.createElement("option");
        opt.value = optData.value;
        opt.textContent = optData.text;
        select.appendChild(opt);
      }
    });
  }
</script>

</body>
</html>
